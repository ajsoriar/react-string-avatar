/**
 * react-string-avatar
 * React String Avatar is a simple React component that generates a letter's avatar like Microsoft or Google do in their web apps. First letter of each word in a string or a group of initials will be used to generate the avatar. The image of the avatar will be rendered in an html img tag as a real png or jpeg. The image data can be retrieved using javascript to be stored in back-end giving you an initial profile picture in your web or mobile apps when the user does not upload one. Several React props are available to configure the output: size, shape, resolution, colors, etc.
 * @version v0.0.3 - 2018-07-18
 * @link https://github.com/ajsoriar/react-string-avatar
 * @author Andres J. Soria R. <ajsoriar@gmail.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */

import React from 'react';import PropTypes from 'prop-types';class StringAvatar extends React.Component{static displayName='StringAvatar';_renderImage(){var _long=45,_picture_resolution=256,_wrapper=!0,_str="",_bgColor="#000",_textcolor="#fff",_pixelated=!1,_img_styling={verticalAlign:'top'},_roundShape=!1,_wrapper_styling="border-radius:0; display:block; overflow:hidden;",_extra_classes="",_extra_img_classes="",_extra_styles="",_corner_radius="0",_picture_format="png",_colors_palette=["#bdc3c7","#6f7b87","#2c3e50","#2f3193","#662d91","#922790","#ec2176","#ed1c24","#f36622","#f8941e","#fab70f","#fdde00","#d1d219","#8ec73f","#00a650","#00aa9c","#00adef","#0081cd","#005bab"],_autoColor=!1,_font_weight=100,_font_scale=100,_text_shadow=!1,_bind=!1,_img_width="100%",_upperCase=!1;function generateAvatar(name,w,h,bgColor,textcolor,bgImage){var WIDTH=256,HEIGHT=256,canvas,ctx,font_size;console.log("w:",w);console.log("h:",h);console.log("name:",name);if(w!=undefined&&w>0){if(h!=undefined&&h>0){WIDTH=w;HEIGHT=h}}
canvas=document.createElement('canvas');canvas.id="ngAvatar-"+Date.now();canvas.width=WIDTH;canvas.height=HEIGHT;ctx=canvas.getContext('2d');ctx.fillStyle=bgColor;ctx.fillRect(0,0,WIDTH,HEIGHT);var _default={fontWeight:100,fontScale:100,pictureFormat:"png"};var str=getInitialsFromString(name);console.log("str:",str);font_size=WIDTH/(2/(_default.fontScale/100));console.log("font_size:",font_size);ctx.font=_default.fontWeight+" "+font_size+"px sans-serif";if(_default.textShadow===!0){ctx.shadowColor="black";ctx.shadowOffsetX=0;ctx.shadowOffsetY=0;ctx.shadowBlur=5}
ctx.textAlign="center";ctx.fillStyle="#fff";ctx.fillText(str,WIDTH/2,HEIGHT-(HEIGHT/2)+(font_size/3));return canvas.toDataURL("image/"+_default.pictureFormat)}
function getInitialsFromString(str){console.log("str:",str);if(!str)return""
var output="",i=0,str=str.split(" "),len=str.length;for(i;i<len;i++)if(str[i]!="")output+=str[i][0];return output}
console.log("this.props:",this.props);if(this.props.initials!=undefined){_str=this.props.initials}
if(this.props.string!=undefined){_str=getInitialsFromString(this.props.string)}
if(this.props.bgColor!=undefined){_bgColor=this.props.bgColor}else{if(this.props.autoColor!=undefined){_autoColor=this.props.autoColor;if(_autoColor===!0){var i,lon=_str.length,charIndex=0,colorIndex;for(i=0;i<lon;i++)charIndex=_str.charCodeAt(i);colorIndex=charIndex%_colors_palette.length;_bgColor=_colors_palette[colorIndex]}}}
var imgData=generateAvatar(_str,this.props.pictureResolution,this.props.pictureResolution,_bgColor,this.props.textcolor,null);var _img_styling={imageRendering:'pixelated',imageRendering:'-moz-crisp-edges'};var _pixelated=this.props.pixelated;if(_pixelated===!0){_img_styling.imageRendering="pixelated"}
var _wrapper_styling={overflow:'hidden',width:this.props.width,height:this.props.width};if(this.props.roundShape!=undefined){console.log("1");_roundShape=this.props.roundShape;if(_roundShape){console.log("2");_wrapper_styling.borderRadius=this.props.width+"px"}}else{console.log("3");if(this.props.cornerRadius!=undefined){console.log("4");_corner_radius=this.props.cornerRadius;_wrapper_styling.borderRadius=_corner_radius+"px"}}
var imgHtml=<img src={imgData}style={_img_styling}width={this.props.width}height=""/>if(this.props.wrapper){return<div className="avatar-wrapper " style={_wrapper_styling}>{imgHtml}</div>}else{return imgHtml}}
render(){return this._renderImage()}}
StringAvatar.propTypes={initials:PropTypes.string,wrapper:PropTypes.bool,bgColor:PropTypes.string,textColor:PropTypes.string,pictureResolution:PropTypes.number,width:PropTypes.number,pixelated:PropTypes.bool,roundShape:PropTypes.bool,string:PropTypes.string,cornerRadius:PropTypes.string,pictureFormat:PropTypes.string,colorsPalette:PropTypes.array,autoColor:PropTypes.bool,fontWeight:PropTypes.number,fontScale:PropTypes.number,textShadow:PropTypes.bool,bind:PropTypes.bool,upperCase:PropTypes.bool,};StringAvatar.defaultProps={initials:null,wrapper:!0,bgColor:"#000",textcolor:"#fff",pictureResolution:50,width:60,pixelated:!1,roundShape:!1,string:null,cornerRadius:"0",pictureFormat:"png",colorsPalette:["#bdc3c7","#6f7b87","#2c3e50","#2f3193","#662d91","#922790","#ec2176","#ed1c24","#f36622","#f8941e","#fab70f","#fdde00","#d1d219","#8ec73f","#00a650","#00aa9c","#00adef","#0081cd","#005bab"],autoColor:!1,fontWeight:100,fontScale:100,textShadow:!1,bind:!1,upperCase:!1,};export default StringAvatar