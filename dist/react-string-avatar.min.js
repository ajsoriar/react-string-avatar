import React from'react';import PropTypes from'prop-types';class StringAvatar extends React.Component{static displayName='StringAvatar';_renderImage(){var _long=45,_picture_resolution=256,_wrapper=true,_str="",_bgcolor="#000",_textcolor="#fff",_pixelated=false,_img_styling={verticalAlign:'top'},_roundShape=false,_wrapper_styling="border-radius:0; display:block; overflow:hidden;",_extra_classes="",_extra_img_classes="",_extra_styles="",_corner_radius="0",_picture_format="png",_colors_palette=["#bdc3c7","#6f7b87","#2c3e50","#2f3193","#662d91","#922790","#ec2176","#ed1c24","#f36622","#f8941e","#fab70f","#fdde00","#d1d219","#8ec73f","#00a650","#00aa9c","#00adef","#0081cd","#005bab"],_autoColor=false,_font_weight=100,_font_scale=100,_text_shadow=false,_bind=false,_img_width="100%",_upperCase=false;function generateAvatar(name,w,h,bgColor,textcolor,bgImage){var WIDTH=256,HEIGHT=256,canvas,ctx,font_size;console.log("w:",w);console.log("h:",h);console.log("name:",name);if(w!=undefined&&w>0){if(h!=undefined&&h>0){WIDTH=w;HEIGHT=h;}}
canvas=document.createElement('canvas');canvas.id="ngAvatar-"+Date.now();canvas.width=WIDTH;canvas.height=HEIGHT;ctx=canvas.getContext('2d');ctx.fillStyle=bgColor;ctx.fillRect(0,0,WIDTH,HEIGHT);var _default={fontWeight:100,fontScale:100,pictureFormat:"png"};var str=getInitialsFromString(name);console.log("str:",str);font_size=WIDTH /(2 /(_default.fontScale / 100));console.log("font_size:",font_size);ctx.font=_default.fontWeight+" "+font_size+"px sans-serif";if(_default.textShadow===true){ctx.shadowColor="black";ctx.shadowOffsetX=0;ctx.shadowOffsetY=0;ctx.shadowBlur=5;}
ctx.textAlign="center";ctx.fillStyle="#fff";ctx.fillText(str,WIDTH / 2,HEIGHT-(HEIGHT / 2)+(font_size / 3));return canvas.toDataURL("image/"+_default.pictureFormat);}
function getInitialsFromString(str){console.log("str:",str);if(!str)return""
var output="",i=0,str=str.split(" "),len=str.length;for(i;i<len;i++)if(str[i]!="")output+=str[i][0];return output;}
const size=50;const imageStyle={maxWidth:'100%',width:size,height:size};console.log("this.props:",this.props);var textString=this.props.str||this.props.initials;var imgData=generateAvatar(textString,this.props.pictureResolution,this.props.pictureResolution,this.props.bgColor,this.props.textcolor,null);var _img_styling={imageRendering:'pixelated',imageRendering:'-moz-crisp-edges'};var _pixelated=this.props.pixelated;if(_pixelated===true){_img_styling.imageRendering="pixelated";}
var _wrapper_styling={overflow:'hidden',width:this.props.width,height:this.props.width};if(this.props.roundShape!=undefined){console.log("1");_roundShape=this.props.roundShape;if(_roundShape){console.log("2");_wrapper_styling.borderRadius=this.props.width+"px";}}else{console.log("3");if(this.props.cornerRadius!=undefined){console.log("4");_corner_radius=this.props.cornerRadius;_wrapper_styling.borderRadius=_corner_radius+"px";}}
var imgHtml=<img src={imgData}style={_img_styling}width={this.props.width}height=""/>if(this.props.wrapper){return<div className="avatar-wrapper "style={_wrapper_styling}>{imgHtml}</div>}else{return imgHtml}}
render(){return this._renderImage(this.props.initials);}}
StringAvatar.propTypes={initials:PropTypes.string,wrapper:PropTypes.bool,bgColor:PropTypes.string,textColor:PropTypes.string,pictureResolution:PropTypes.number,width:PropTypes.number,pixelated:PropTypes.bool,roundShape:PropTypes.bool,cornerRadius:PropTypes.string,pictureFormat:PropTypes.string,colorsPalette:PropTypes.array,autoColor:PropTypes.bool,fontWeight:PropTypes.number,fontScale:PropTypes.number,textShadow:PropTypes.bool,bind:PropTypes.bool,upperCase:PropTypes.bool,};StringAvatar.defaultProps={initials:null,wrapper:true,bgColor:"#000",textcolor:"#fff",pictureResolution:50,width:60,pixelated:false,roundShape:false,cornerRadius:"0",pictureFormat:"png",colorsPalette:["#bdc3c7","#6f7b87","#2c3e50","#2f3193","#662d91","#922790","#ec2176","#ed1c24","#f36622","#f8941e","#fab70f","#fdde00","#d1d219","#8ec73f","#00a650","#00aa9c","#00adef","#0081cd","#005bab"],autoColor:false,fontWeight:100,fontScale:100,textShadow:false,bind:false,upperCase:false,};export default StringAvatar;